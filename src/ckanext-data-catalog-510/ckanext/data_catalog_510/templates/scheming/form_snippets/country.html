{% import 'macros/form.html' as form %}

{%- set options=[] -%}
{%- if field.get('form_include_blank_choice', false) -%}
    {%- do options.append({
        'value': '',
        'text': ''}) -%}
{%- endif -%}
{%- if field.get('sorted_choices', true) -%}
    {%- set countries = h.get_countries_list() -%}
{%- endif -%}
{% for country in countries %}
     {%- if country['name'] or not h.scheming_field_required(field) -%}
        {%- do options.append({
            'value': country['name'],
            'text': country['name']}) -%}
    {%- endif -%}
{% endfor %}


{% set tag_attrs = {'data_module':'autocomplete','data-module-tags':'', 'data_module_source':
    '/api/3/action/country_autocomplete?incomplete=?'} %}
{{ form.select('Country', id='field_tags', label=_('Country'), placeholder=_('eg. Spain, India'),value=data.country,
error=errors.tags, classes=['control-full'], attrs= tag_attrs)}}
{%- snippet 'scheming/form_snippets/help_text.html', field=field -%}